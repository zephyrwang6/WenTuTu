<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>文图图设置</title>
  <link rel="stylesheet" type="text/css" href="css/options.css">
  <style>
    .test-btn {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 10px;
      width: 80px; /* 添加宽度样式 */
    }
    .test-btn:hover {
      background-color: #45a049;
    }
    .help-text {
      margin-bottom: 15px;
      color: #666;
    }
    .api-input-group {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .api-input-group input {
      flex-grow: 1;
    }
    .success-message {
      color: #4CAF50;
      font-weight: bold;
      margin-top: 5px;
      display: none;
    }
    .error-message {
      color: #f44336;
      font-weight: bold;
      margin-top: 5px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>文图图设置</h1>
    </div>
    
    <div class="section">
      <h2>DeepSeek API配置</h2>
      <p class="help-text">
        从 <a href="https://platform.deepseek.com/" target="_blank">DeepSeek平台</a> 获取您的API密钥
      </p>
      <div class="form-group">
        <label for="apiKey">API密钥:</label>
        <div class="api-input-group">
          <input type="password" id="apiKey" placeholder="请输入您的API密钥">
          <button id="testApiKey" class="test-btn">测试连接</button>
        </div>
        <p class="api-key-hint">
          获取测试密钥，<a href="https://v3oxu28gnc.feishu.cn/wiki/S2uWwmt5siVUp7kUycMc7f3JnC6?from=from_copylink" target="_blank">查看产品文档</a>
        </p>
        <div id="apiTestSuccess" class="success-message">连接成功！API密钥有效。</div>
        <div id="apiTestError" class="error-message">连接失败，请检查您的API密钥。</div>
      </div>
    </div>

    <div class="section">
      <h2>自定义提示词</h2>
      <p class="help-text">您可以创建最多5个自定义提示词。每个提示词都将在弹出菜单中可用。</p>
      
      <div id="customPrompts">
        <!-- 自定义提示词模板将在这里动态添加 -->
      </div>

      <div class="button-group">
        <button id="addPrompt" class="secondary">添加自定义提示词</button>
        <button id="resetPrompts" class="secondary">重置所有</button>
      </div>
    </div>

    <div class="button-group">
      <button id="save">保存设置</button>
    </div>

    <!-- 提示通知 -->
    <div id="toast" class="toast"></div>

    <!-- 自定义提示词模板 -->
    <template id="promptTemplate">
      <div class="custom-prompt">
        <div class="prompt-header">
          <div class="prompt-enable">
            <input type="checkbox" class="prompt-enabled" id="enabled_{{id}}">
            <label for="enabled_{{id}}">启用</label>
          </div>
          <button class="delete-prompt" title="删除此提示词">×</button>
        </div>
        <div class="form-group">
          <label for="name_{{id}}">提示词名称:</label>
          <input type="text" class="prompt-name" id="name_{{id}}" placeholder="输入提示词名称" maxlength="20">
        </div>
        <div class="form-group">
          <label for="content_{{id}}">提示词内容:</label>
          <textarea class="prompt-content" id="content_{{id}}" rows="6" placeholder="输入提示词内容..."></textarea>
        </div>
      </div>
    </template>
  </div>
  <script src="js/options.js"></script>
</body>
</html>
